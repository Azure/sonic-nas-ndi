<?xml version="1.0"?>
<!--copyright 2019 Dell, Inc.  
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
    http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
--> 

<!-- TODO: Update with network instance l2 yang  -->


<!DOCTYPE CLISH_MODULE [
]>

<CLISH_MODULE xmlns="http://www.dellemc.com/sonic/XMLSchema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xsi:schemaLocation="http://www.dellemc.com/sonic/XMLSchema
                        http://www.dellemc.com/sonic/XMLSchema/clish.xsd">

<VIEW name="enable-view">
    <COMMAND
        name="show mac"
        help="show mac"
        >
        <ACTION> 
            builtin="clish_nop"
        </ACTION>
    </COMMAND>

<!--====================show mac address-table command======================-->
    <COMMAND
        help="show mac address table"
        name="show mac address-table"
        >
        <ACTION> 
	    python $SONIC_CLI_ROOT/sonic-cli-mac.py get_openconfig_interfaces_interfaces show_mac.j2 show
        </ACTION>
    </COMMAND>

<!--====================show mac address-table count command ======================-->
    <COMMAND
        help="show mac address table count"
        name="show mac address-table count"
        >
        <ACTION> 
            python $SONIC_CLI_ROOT/sonic-cli-mac.py get_openconfig_interfaces_interfaces show_mac_count.j2 count 
        </ACTION>
    </COMMAND>


<!--====================show mac address-table address <mac-address> command ======================-->
    <COMMAND
        help="show mac address table address mac-address"
        name="show mac address-table address"
        >
        <PARAM
            name="mac-addr"
            help="48 bit MAC address"
            ptype="MAC_ADDR"
	    >
	</PARAM>
        <ACTION>
		python $SONIC_CLI_ROOT/sonic-cli-mac.py get_openconfig_interfaces_interfaces show_mac.j2 mac-addr ${mac-addr}
        </ACTION>
    </COMMAND>

<!--====================show mac address-table vlan <vlan-id> command ======================-->
    <COMMAND
        help="mac address-table for VLAN"
        name="show mac address-table vlan"
        >
        <PARAM
            name="vlan-id"
            help="VLAN identifier (1-4094)"
            ptype="VLAN_ID"
	    >
	</PARAM>
        <ACTION>
		python $SONIC_CLI_ROOT/sonic-cli-mac.py get_openconfig_interfaces_interfaces show_mac.j2 vlan ${vlan-id}
        </ACTION>
    </COMMAND>

<!--====================show mac address-table interface <p-id> command ======================-->
    <COMMAND
        help="mac address-table for interfaces"
        name="show mac address-table interface">
	<PARAM
	    name="if-subcommands"
	    help="Interface subcommands"
	    mode="switch"
	    ptype="SUBCOMMAND"
	    >
	    <PARAM
	        name="Ethernet"
		help="Ethernet IEEE 802.3"
		ptype="SUBCOMMAND"
		mode="subcommand"
		>
		<PARAM
		    name="phy-if-id"
                    help="Physical interface(Multiples of 4)"
		    ptype="UINT"
		    >
                </PARAM>
            </PARAM>
	    <PARAM
	        name="Port-channel"
		help="Port-channel ID (1-128)"
		ptype="SUBCOMMAND"
		mode="subcommand"
		>
		<PARAM
		    name="po-id"
                    help="port-channel id (1-128)"
		    ptype="UINT"
		    >
                </PARAM>
	    </PARAM>
            </PARAM>
        <ACTION>
		if test "${if-subcommands}" = "Ethernet"; then&#xA;
		    python $SONIC_CLI_ROOT/sonic-cli-mac.py get_openconfig_interfaces_interfaces show_mac.j2 interface Ethernet${phy-if-id}&#xA; 
		elif test "${if-subcommands}" = "Port-channel"; then&#xA;
		    python $SONIC_CLI_ROOT/sonic-cli-mac.py get_openconfig_interfaces_interfaces show_mac.j2 interface Port-channel${po-id}&#xA; 
                else&#xA;
		    python $SONIC_CLI_ROOT/sonic-cli-mac.py get_openconfig_interfaces_interfaces show_mac.j2 ${__full_line}&#xA;
	        fi	
        </ACTION>
    </COMMAND>

<!--====================show mac address-table static commands ======================-->
    <COMMAND
        help="mac address-table for static commands"
        name="show mac address-table static">
	<PARAM
	    name="s-subcommands"
	    help="static subcommands"
	    mode="switch"
	    ptype="SUBCOMMAND"
	    optional="true"
	    >
	    <PARAM
	        name="Address"
		help="Address of static mac"
		ptype="SUBCOMMAND"
		mode="subcommand"
		>
		<PARAM
		    name="mac-addr"
                    help="Static Mac address"
		    ptype="MAC_ADDR"
		    >
                </PARAM>
            </PARAM>
	    <PARAM
	        name="VLAN"
		help="VLAN ID (1-128)"
		ptype="SUBCOMMAND"
		mode="subcommand"
		>
		<PARAM
		    name="vlan-id"
                    help="static vlan id"
		    ptype="VLAN_ID"
		    >
                </PARAM>
            </PARAM>
            <PARAM
                name="Interface"
                help="Static Interface"
		ptype="SUBCOMMAND"
		mode="subcommand"
		>
		<PARAM
		    name="interface-subcommand"
	            help="static interface subcommands"
	            ptype="SUBCOMMAND"
	            mode="switch"	    
		    >
                    <PARAM
                        name="Ethernet"
                        help="static interface Ethernet id - ethernet"
		        ptype="SUBCOMMAND"
		        mode="subcommand"
		        >
		        <PARAM
		            name="phy-if-id"
                            help="Static interface ethernet id-phy-if-id"
			    ptype="UINT"
			    >
	                 </PARAM>
		    </PARAM>
                    <PARAM
                        name="Port-channel"
                        help="static port-channel id - pc"
		        ptype="SUBCOMMAND"
		        mode="subcommand"
		        >
		        <PARAM
		            name="po-id"
                            help="Static interface port-channel id po-id"
			    ptype="UINT"
			    >
		        </PARAM>
	            </PARAM>
		</PARAM>
            </PARAM>
        </PARAM>
        <ACTION>
		if test "${s-subcommands}" = "Address"; then&#xA;
		    python $SONIC_CLI_ROOT/sonic-cli-mac.py get_openconfig_interfaces_interfaces show_mac.j2 static address ${mac-addr}&#xA; 
		elif test "${s-subcommands}" = "VLAN"; then&#xA;
		    python $SONIC_CLI_ROOT/sonic-cli-mac.py get_openconfig_interfaces_interfaces show_mac.j2 static vlan ${vlan-id}&#xA; 
                elif test "${s-subcommands}" = "Interface"; then&#xA;
                    if test "${interface-subcommand}" = "Port-channel"; then&#xA;
                        python $SONIC_CLI_ROOT/sonic-cli-mac.py get_openconfig_interfaces_interfaces show_mac.j2 static interface Port-channel${po-id}&#xA;
                    else&#xA;
                        python $SONIC_CLI_ROOT/sonic-cli-mac.py get_openconfig_interfaces_interfaces show_mac.j2 static interface Ethernet${phy-if-id}&#xA;
                    fi&#xA;
                else&#xA;
		    python $SONIC_CLI_ROOT/sonic-cli-mac.py get_openconfig_interfaces_interfaces show_mac.j2 static ${__full_line}&#xA;
	        fi	
        </ACTION>
    </COMMAND>

<!--====================show mac address-table dynamic commands ======================-->
    <COMMAND
        help="mac address-table for dynamic commands"
        name="show mac address-table dynamic">
        <PARAM
            name="d-subcommands"
            help="dynamic subcommands"
            mode="switch"
	    ptype="SUBCOMMAND"
	    optional="true"
            >
            <PARAM
                name="Address"
                help="Address of dynamic mac"
                ptype="SUBCOMMAND"
                mode="subcommand"
                >
                <PARAM
                    name="mac-addr"
                    help="dynamic Mac address"
                    ptype="MAC_ADDR"
                    >
                </PARAM>
            </PARAM>
            <PARAM
                name="VLAN"
                help="VLAN ID (1-128)"
                ptype="SUBCOMMAND"
                mode="subcommand"
                >
                <PARAM
                    name="vlan-id"
                    help="dynamic vlan id"
                    ptype="VLAN_ID"
                    >
                </PARAM>
            </PARAM>
            <PARAM
                name="Interface"
                help="dynamic Interface"
                ptype="SUBCOMMAND"
                mode="subcommand"
                >
                <PARAM
                    name="interface-subcommand"
                    help="dynamic interface subcommands"
                    ptype="SUBCOMMAND"
                    mode="switch"           
                    >
                    <PARAM
                        name="Ethernet"
                        help="dynamic interface Ethernet id - ethernet"
                        ptype="SUBCOMMAND"
                        mode="subcommand"
                        >
                        <PARAM
                            name="phy-if-id"
                            help="dynamic interface ethernet id-phy-if-id"
                            ptype="UINT"
                            >
                         </PARAM>
                    </PARAM>
                    <PARAM
                        name="Port-channel"
                        help="dynamic port-channel id - pc"
                        ptype="SUBCOMMAND"
                        mode="subcommand"
                        >
                        <PARAM
                            name="po-id"
                            help="dynamic interface port-channel id po-id"
                            ptype="UINT"
                            >
                        </PARAM>
                    </PARAM>
                </PARAM>
            </PARAM>
        </PARAM>
        <ACTION>
                if test "${d-subcommands}" = "Address"; then&#xA;
                    python $SONIC_CLI_ROOT/sonic-cli-mac.py get_openconfig_interfaces_interfaces show_mac.j2 dynamic address ${mac-addr}&#xA;
                elif test "${d-subcommands}" = "VLAN"; then&#xA;
                    python $SONIC_CLI_ROOT/sonic-cli-mac.py get_openconfig_interfaces_interfaces show_mac.j2 dynamic vlan ${vlan-id}&#xA;
                elif test "${d-subcommands}" = "Interface"; then&#xA;
                    if test "${interface-subcommand}" = "Port-channel"; then&#xA;
                        python $SONIC_CLI_ROOT/sonic-cli-mac.py get_openconfig_interfaces_interfaces show_mac.j2 dynamic interface Port-channel${po-id}&#xA;
                    else&#xA;
                        python $SONIC_CLI_ROOT/sonic-cli-mac.py get_openconfig_interfaces_interfaces show_mac.j2 dynamic interface Ethernet${phy-if-id}&#xA;
                    fi&#xA;
                else&#xA;
                    python $SONIC_CLI_ROOT/sonic-cli-mac.py get_openconfig_interfaces_interfaces show_mac.j2 dynamic ${__full_line}&#xA;
                fi
        </ACTION>
    </COMMAND>

</VIEW>
</CLISH_MODULE>
