<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE CLISH_MODULE [

<!ENTITY NAMESPACE                            "http://www.dellemc.com/networking/os10/dell-port-group">

<!ENTITY BASE_CMN_NAMESPACE                   "http://www.dellemc.com/networking/os10/dell-base-common">
<!ENTITY BASE_CMN_PREF                        "base-cmn">

<!ENTITY BASE_IF_NAMESPACE                    "http://www.dellemc.com/networking/os10/dell-base-interface-common">
<!ENTITY BASE_IF_PREF                         "base-if">

<!ENTITY INTF_NAMESPACE                       "&NAMESPACE;,&BASE_CMN_PREF;=&BASE_CMN_NAMESPACE;,&BASE_IF_PREF;=&BASE_IF_NAMESPACE;">

<!ENTITY PG_CFG                               "/port-groups/port-group">
<!ENTITY PG_CFG_ID                            "&PG_CFG;/id=${id}">
<!ENTITY PG_STATE                             "/port-groups-state/port-group-state">
<!ENTITY PG_STATE_ID                          "&PG_STATE;/id=${id}">

<!ENTITY FILTER_PFX                           "Filter_Type:SUBTREE;Filter_Namespace:&NAMESPACE;;Filter_Conditions:">

]>

<CLISH_MODULE
    xmlns="http://www.dellemc.com/force10/XMLSchema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xsi:schemaLocation="http://www.dellemc.com/force10/XMLSchema
                        http://www.dellemc.com/force10/XMLSchema/clish.xsd"
    >
    <!--=======================================================-->
    <!--                   EXEC MODE                           -->
    <!--=======================================================-->
    <VIEW
        name="enable-view"
        >
        <!-- show port-group -->
        <COMMAND
            name="show port-group"
            help="Show port-group info"
            pfeature="FEATURE_PORT_GROUP"
            operation="get"
            namespace="&NAMESPACE;"
            yang_filter="&FILTER_PFX;&PG_CFG;|&FILTER_PFX;&PG_STATE;"
            template="show_port_group.xsl"
            >
            <PARAM
                name="id"
                help="port-group id"
                ptype="PORT_GROUP_ID"
                optional="true"
                yang_filter="&FILTER_PFX;&PG_CFG_ID;|&FILTER_PFX;&PG_STATE_ID;"
                template="show_port_group.xsl">
            </PARAM>
            <ACTION
                builtin="clish_extn"
                />
        </COMMAND>
    </VIEW>
    <!--=======================================================-->
    <!--                Config MODE                            -->
    <!--=======================================================-->
    <VIEW
        name="configure-view"
        >
        <!-- port-group <port-group id> -->
        <COMMAND
            name="port-group"
            help="port-group configuration"
            pfeature="FEATURE_PORT_GROUP"
            namespace="&INTF_NAMESPACE;"
            operation="edit-config"
            yang_key="&PG_CFG;/id"
            >
            <PARAM
                name="id"
                help="port-group id"
                ptype="PORT_GROUP_ID"
                yang_name="&PG_CFG_ID;"
                viewid="id=${id}"
                view="configure-pg-view"/>
            <ACTION
                builtin="clish_extn"
                />
        </COMMAND>
    </VIEW>
    <!--=======================================================-->
    <!--                   CONFIG PORT-GROUP MODE              -->
    <!--=======================================================-->
    <VIEW
        name="configure-pg-view"
        prompt="${SYSTEM_NAME}(conf-pg-${id})# "
        depth="2"
        >
        <!-- Inheritance -->
        <NAMESPACE
            ref="configure-view"
            help="false"
            completion="false"
            />
        <!-- Show commands -->
        <COMMAND
            name="show"
            help="Show configuration"
            pfeature="FEATURE_PORT_GROUP"
            />
        <!-- show configuration candidate -->
        <COMMAND
            name="show configuration candidate"
            help="Current candidate configuration"
            yang_filter="&FILTER_PFX;&PG_CFG;"
            >
            <ACTION builtin="clish_extn"> </ACTION>
        </COMMAND>
        <!-- show configuration -->
        <COMMAND
            name="show configuration"
            help="Current configuration (default = running)"
            yang_filter="&FILTER_PFX;&PG_CFG;"
            >
            <ACTION builtin="clish_extn"> </ACTION>
        </COMMAND>
        <!-- mode Eth|FC speed-breakout -->
        <COMMAND
            name="mode"
            operation="edit-config"
            namespace="&INTF_NAMESPACE;"
            help="port-group mode"
            db_mode="configure-pg">
            <PARAM
                name="type-switch"
                help="port-group type"
                mode="switch"
                ptype="SUBCOMMAND">
                <PARAM
                    name="Eth"
                    help="Ethernet"
                    ptype="SUBCOMMAND"
                    mode="subcommand"
                    yang_name="&PG_CFG_ID;,&PG_CFG;/phy-mode=ETHERNET">
                    <PARAM
                        name="breakout-switch"
                        help="port-group speed and breakout mode"
                        mode="switch"
                        ptype="STRING">
                        <PARAM
                            pfeature="NOT_SUPPORTED"
                            name="100g-2x"
                            help="breakout to 2 100G interfaces"
                            mode="subcommand"
                            ptype="SUBCOMMAND"
                            yang_name="&PG_CFG;/breakout-mode=BREAKOUT_2x2,&PG_CFG;/port-speed=100GIGE"
                        />
                        <PARAM
                            name="100g-1x"
                            help="breakout to 1 100G interface"
                            mode="subcommand"
                            ptype="SUBCOMMAND"
                            yang_name="&PG_CFG;/breakout-mode=BREAKOUT_1x1,&PG_CFG;/port-speed=100GIGE"
                        />
                        <PARAM
                            name="50g-2x"
                            help="breakout to 2 50G interfaces"
                            mode="subcommand"
                            ptype="SUBCOMMAND"
                            yang_name="&PG_CFG;/breakout-mode=BREAKOUT_2x1,&PG_CFG;/port-speed=50GIGE"
                        />
                        <PARAM
                            name="40g-1x"
                            help="breakout to 1 40G interface"
                            mode="subcommand"
                            ptype="SUBCOMMAND"
                            yang_name="&PG_CFG;/breakout-mode=BREAKOUT_1x1,&PG_CFG;/port-speed=40GIGE"
                        />
                        <PARAM
                            pfeature="NOT_SUPPORTED"
                            name="25g-8x"
                            help="breakout to 8 25G interfaces"
                            mode="subcommand"
                            ptype="SUBCOMMAND"
                            yang_name="&PG_CFG;/breakout-mode=BREAKOUT_8x2,&PG_CFG;/port-speed=25GIGE"
                        />
                        <PARAM
                            name="25g-4x"
                            help="breakout to 4 25G interfaces"
                            mode="subcommand"
                            ptype="SUBCOMMAND"
                            yang_name="&PG_CFG;/breakout-mode=BREAKOUT_4x1,&PG_CFG;/port-speed=25GIGE"
                        />
                        <PARAM
                            name="10g-4x"
                            help="breakout to 4 10G interfaces"
                            mode="subcommand"
                            ptype="SUBCOMMAND"
                            prompt_fn="insert_port_group_breakout_ports"
                            prompt_oper="&PG_STATE_ID;"
                            yang_name="&PG_CFG;/breakout-mode=BREAKOUT_4x,&PG_CFG;/port-speed=10GIGE"
                        />
                    </PARAM>
                </PARAM>
                <PARAM
                    name="FC"
                    help="Fiber channel"
                    ptype="SUBCOMMAND"
                    mode="subcommand"
                    yang_name="&PG_CFG_ID;,&PG_CFG;/phy-mode=FC">
                    <PARAM
                        name="breakout-switch"
                        help="port-group speed and breakout mode"
                        mode="switch"
                        ptype="STRING">
                        <PARAM
                            name="32g-2x"
                            help="breakout to 2 32G interfaces"
                            mode="subcommand"
                            ptype="SUBCOMMAND"
                            yang_name="&PG_CFG;/breakout-mode=BREAKOUT_2x1,&PG_CFG;/port-speed=32GFC"
                            />
                        <PARAM
                            name="32g-1x"
                            help="breakout to 1 32G interface"
                            mode="subcommand"
                            ptype="SUBCOMMAND"
                            yang_name="&PG_CFG;/breakout-mode=BREAKOUT_1x1,&PG_CFG;/port-speed=32GFC"
                            />
                        <PARAM
                            name="16g-4x"
                            help="breakout to 4 16G interfaces"
                            mode="subcommand"
                            ptype="SUBCOMMAND"
                            yang_name="&PG_CFG;/breakout-mode=BREAKOUT_4x1,&PG_CFG;/port-speed=16GFC"
                        />
                        <PARAM
                            name="16g-2x"
                            help="breakout to 2 16G interfaces"
                            mode="subcommand"
                            ptype="SUBCOMMAND"
                            yang_name="&PG_CFG;/breakout-mode=BREAKOUT_2x4,&PG_CFG;/port-speed=16GFC"
                        />
                        <PARAM
                            name="8g-4x"
                            help="breakout to 4 8G interfaces"
                            mode="subcommand"
                            ptype="SUBCOMMAND"
                            prompt_fn="insert_port_group_breakout_ports"
                            prompt_oper="&PG_STATE_ID;"
                            yang_name="&PG_CFG;/breakout-mode=BREAKOUT_4x,&PG_CFG;/port-speed=8GFC"
                        />
                    </PARAM>
                </PARAM>
            </PARAM>
            <ACTION builtin="clish_extn"> </ACTION>
        </COMMAND>
        <COMMAND
            name="no"
            help="Negate a command or set its defaults"
            pfeature="FEATURE_PORT_GROUP"
            />
        <COMMAND
            name="no mode"
            operation="edit-config"
            namespace="&INTF_NAMESPACE;"
            help="set default port-group mode"
            prompt_fn="insert_port_group_defaults"
            prompt_oper="/port-groups-state/port-group-state/id=${id}"
            yang_name="&PG_CFG_ID;">
            <ACTION builtin="clish_extn"> </ACTION>
        </COMMAND>
    </VIEW>
</CLISH_MODULE>
