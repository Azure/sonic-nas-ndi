<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE CLISH_MODULE [
<!ENTITY NAME_SPACE                     "http://www.dellemc.com/networking/os10/dell-system-software">
<!ENTITY NAME_SPACE_UPTIME              "http://www.dellemc.com/networking/os10/dell-system">
<!ENTITY SUBTREE_FILTER                 "Filter_Type:SUBTREE">
<!ENTITY FILTER_NS_SOFTWARE             "&SUBTREE_FILTER;;Filter_Namespace:&NAME_SPACE;;Filter_Conditions:">
<!ENTITY FILTER_NS_UPTIME               "&SUBTREE_FILTER;;Filter_Namespace:&NAME_SPACE_UPTIME;;Filter_Conditions:">
<!ENTITY FILTER_NS_FILESYS              "&SUBTREE_FILTER;;Filter_Namespace:&NAME_SPACE_FILESYS;;Filter_Conditions:">
<!ENTITY BOOT_SYSTEM                    "/boot-system">
<!ENTITY IMAGE_UPGRADE                  "/image-upgrade">
<!ENTITY FTP_URL                        "remote FTP server (ftp://userid:passwd@hostip/filepath)">
<!ENTITY SCP_URL                        "remote SCP server (scp://userid:passwd@hostip/filepath)">
<!ENTITY TFTP_URL                       "remote TFTP server (tftp://hostip/filepath)">
<!ENTITY SFTP_URL                       "remote SFTP server (sftp://userid:passwd@hostip/filepath)">
<!ENTITY HTTP_URL                       "remote HTTP (http://hostip/filepath)">
<!ENTITY IMAGE_URL                      "image directory (image://filepath)">
<!ENTITY USB_URL                        "USB directory (usb://filepath)">
<!ENTITY UPG_PROMPT_STR                 "Proceed with upgrade and reboot [confirm yes/no]:">
]>

<CLISH_MODULE
    xmlns="http://www.dellemc.com/force10/XMLSchema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xsi:schemaLocation="http://www.dellemc.com/force10/XMLSchema
    http://www.dellemc.com/force10/XMLSchema/clish.xsd"
    >
    <VIEW name="enable-view">
        <!--MODE : exec -->
        <COMMAND name="image"
            help="Image commands"
            access="sysadmin"
            >
        </COMMAND>

        <!-- image upgrade -->
        <COMMAND name="image upgrade"
            help="Perform a software upgrade operation"
            access="sysadmin"
            ptype="SUBCOMMAND"
            operation="generic-rpc"
            namespace="&NAME_SPACE;"
            yang_name="&IMAGE_UPGRADE;"
            >
            <PARAM
                name="upgrade_option"
                help="Image upgrade options"
                ptype="SUBCOMMAND"
                mode="switch"
                >
                <PARAM
                    name="ftp_upgrade"
                    help="Upgrade from &FTP_URL;"
                    ptype="FTP_TYPE"
                    yang_name="&IMAGE_UPGRADE;/system-module=all,&IMAGE_UPGRADE;/operation=upgrade,&IMAGE_UPGRADE;/filename=${ftp_upgrade}"
                    prompt_fn="pwd_prompt_system_reload_cb"
                    prompt_str="&UPG_PROMPT_STR;"
                    >
                </PARAM>
                <PARAM
                    name="http_upgrade"
                    help="Upgrade from &HTTP_URL;"
                    ptype="HTTP_TYPE"
                    yang_name="&IMAGE_UPGRADE;/system-module=all,&IMAGE_UPGRADE;/operation=upgrade,&IMAGE_UPGRADE;/filename=${http_upgrade}"
                    prompt_fn="system_reload_cb"
                    prompt_str="&UPG_PROMPT_STR;"
                    >
                </PARAM>
                <PARAM
                    name="image_upgrade"
                    help="Upgrade from &IMAGE_URL;"
                    ptype="IMAGE_TYPE"
                    yang_name="&IMAGE_UPGRADE;/system-module=all,&IMAGE_UPGRADE;/operation=upgrade,&IMAGE_UPGRADE;/filename=${image_upgrade}"
                    prompt_fn="system_reload_cb"
                    prompt_str="&UPG_PROMPT_STR;"
                    >
                </PARAM>
                <PARAM
                    name="scp_upgrade"
                    help="Upgrade from &SCP_URL;"
                    ptype="SCP_TYPE"
                    yang_name="&IMAGE_UPGRADE;/system-module=all,&IMAGE_UPGRADE;/operation=upgrade,&IMAGE_UPGRADE;/filename=${scp_upgrade}"
                    prompt_fn="pwd_prompt_system_reload_cb"
                    prompt_str="&UPG_PROMPT_STR;"
                    >
                </PARAM>
                <PARAM
                    name="sftp_upgrade"
                    help="Upgrade from &SFTP_URL;"
                    ptype="SFTP_TYPE"
                    yang_name="&IMAGE_UPGRADE;/system-module=all,&IMAGE_UPGRADE;/operation=upgrade,&IMAGE_UPGRADE;/filename=${sftp_upgrade}"
                    prompt_fn="pwd_prompt_system_reload_cb"
                    prompt_str="&UPG_PROMPT_STR;"
                    >
                </PARAM>
                <PARAM
                    name="tftp_upgrade"
                    help="Upgrade from &TFTP_URL;"
                    ptype="TFTP_TYPE"
                    yang_name="&IMAGE_UPGRADE;/system-module=all,&IMAGE_UPGRADE;/operation=upgrade,&IMAGE_UPGRADE;/filename=${tftp_upgrade}"
                    prompt_fn="system_reload_cb"
                    prompt_str="&UPG_PROMPT_STR;"
                    >
                </PARAM>
                <PARAM
                    name="usb_upgrade"
                    help="Upgrade from &USB_URL;"
                    ptype="USB_TYPE"
                    yang_name="&IMAGE_UPGRADE;/system-module=all,&IMAGE_UPGRADE;/operation=upgrade,&IMAGE_UPGRADE;/filename=${usb_upgrade}"
                    prompt_fn="system_reload_cb"
                    prompt_str="&UPG_PROMPT_STR;"
                    >
                </PARAM>
            </PARAM>
        <ACTION builtin="clish_extn"/>
    </COMMAND>

    <!-- image install -->
    <COMMAND name="image install"
        help="Perform a software install operation"
        access="sysadmin"
        ptype="SUBCOMMAND"
        operation="generic-rpc"
        namespace="&NAME_SPACE;"
        yang_name="&IMAGE_UPGRADE;"
        >
        <PARAM
            name="install_option"
            help="Image install options"
            ptype="SUBCOMMAND"
            mode="switch"
            >
            <PARAM
                name="ftp_install"
                help="Install from &FTP_URL;"
                ptype="FTP_TYPE"
                prompt_fn="pwd_prompt"
                yang_name="&IMAGE_UPGRADE;/system-module=all,&IMAGE_UPGRADE;/operation=install,&IMAGE_UPGRADE;/filename=${ftp_install}"
                >
            </PARAM>
            <PARAM
                name="http_install"
                help="Install from &HTTP_URL;"
                ptype="HTTP_TYPE"
                yang_name="&IMAGE_UPGRADE;/system-module=all,&IMAGE_UPGRADE;/operation=install,&IMAGE_UPGRADE;/filename=${http_install}"
                >
            </PARAM>
            <PARAM
                name="image_install"
                help="Install from &IMAGE_URL;"
                ptype="IMAGE_TYPE"
                yang_name="&IMAGE_UPGRADE;/system-module=all,&IMAGE_UPGRADE;/operation=install,&IMAGE_UPGRADE;/filename=${image_install}"
                >
            </PARAM>
            <PARAM
                name="scp_install"
                help="Install from &SCP_URL;"
                ptype="SCP_TYPE"
                prompt_fn="pwd_prompt"
                yang_name="&IMAGE_UPGRADE;/system-module=all,&IMAGE_UPGRADE;/operation=install,&IMAGE_UPGRADE;/filename=${scp_install}"
                >
            </PARAM>
            <PARAM
                name="sftp_install"
                help="Install from &SFTP_URL;"
                ptype="SFTP_TYPE"
                prompt_fn="pwd_prompt"
                yang_name="&IMAGE_UPGRADE;/system-module=all,&IMAGE_UPGRADE;/operation=install,&IMAGE_UPGRADE;/filename=${sftp_install}"
                >
            </PARAM>
            <PARAM
                name="tftp_install"
                help="Install from &TFTP_URL;"
                ptype="TFTP_TYPE"
                yang_name="&IMAGE_UPGRADE;/system-module=all,&IMAGE_UPGRADE;/operation=install,&IMAGE_UPGRADE;/filename=${tftp_install}"
                >
            </PARAM>
            <PARAM
                name="usb_install"
                help="Install from &USB_URL;"
                ptype="USB_TYPE"
                yang_name="&IMAGE_UPGRADE;/system-module=all,&IMAGE_UPGRADE;/operation=install,&IMAGE_UPGRADE;/filename=${usb_install}"
                >
            </PARAM>
        </PARAM>
        <ACTION builtin="clish_extn"/>
    </COMMAND>

    <!-- image download -->
    <COMMAND name="image download"
        help="Perform a software download operation"
        access="sysadmin"
        ptype="SUBCOMMAND"
        operation="generic-rpc"
        namespace="&NAME_SPACE;"
        yang_name="&IMAGE_UPGRADE;"
        >
        <PARAM
            name="download"
            help="Image download options"
            ptype="SUBCOMMAND"
            mode="switch"
            >
            <PARAM
                name="ftp_download"
                help="Download from &FTP_URL;"
                ptype="FTP_TYPE"
                prompt_fn="pwd_prompt"
                yang_name="&IMAGE_UPGRADE;/system-module=all,&IMAGE_UPGRADE;/operation=download,&IMAGE_UPGRADE;/filename=${ftp_download}"
                >
            </PARAM>
            <PARAM
                name="http_download"
                help="Download from &HTTP_URL;"
                ptype="HTTP_TYPE"
                yang_name="&IMAGE_UPGRADE;/system-module=all,&IMAGE_UPGRADE;/operation=download,&IMAGE_UPGRADE;/filename=${http_download}"
                >
            </PARAM>
            <PARAM
                name="scp_download"
                help="Download from &SCP_URL;"
                ptype="SCP_TYPE"
                prompt_fn="pwd_prompt"
                yang_name="&IMAGE_UPGRADE;/system-module=all,&IMAGE_UPGRADE;/operation=download,&IMAGE_UPGRADE;/filename=${scp_download}"
                >
            </PARAM>
            <PARAM
                name="sftp_download"
                help="Download from &SFTP_URL;"
                ptype="SFTP_TYPE"
                prompt_fn="pwd_prompt"
                yang_name="&IMAGE_UPGRADE;/system-module=all,&IMAGE_UPGRADE;/operation=download,&IMAGE_UPGRADE;/filename=${sftp_download}"
                >
            </PARAM>
            <PARAM
                name="tftp_download"
                help="Download from &TFTP_URL;"
                ptype="TFTP_TYPE"
                yang_name="&IMAGE_UPGRADE;/system-module=all,&IMAGE_UPGRADE;/operation=download,&IMAGE_UPGRADE;/filename=${tftp_download}"
                >
            </PARAM>
            <PARAM
                name="usb_download"
                help="Download from &USB_URL;"
                ptype="USB_TYPE"
                yang_name="&IMAGE_UPGRADE;/system-module=all,&IMAGE_UPGRADE;/operation=download,&IMAGE_UPGRADE;/filename=${usb_download}"
                >
            </PARAM>
        </PARAM>
        <ACTION builtin="clish_extn"/>
    </COMMAND>

    <!-- image cancel -->
    <COMMAND name="image cancel"
        help="Cancel image installation process"
        access="sysadmin"
        ptype="SUBCOMMAND"
        operation="generic-rpc"
        namespace="&NAME_SPACE;"
        yang_name="/cancel-operation"
        >
        <ACTION builtin="clish_extn"/>
    </COMMAND>

    <!-- image copy active-to-standby -->
    <COMMAND name="image copy"
        help="Copy active image to standby partition"
        access="sysadmin"
        >
    </COMMAND>
    <COMMAND name="image copy active-to-standby"
        help="Copy the entire image in active partition to standby partition (mirror image)"
        access="sysadmin"
        ptype="SUBCOMMAND"
        operation="generic-rpc"
        namespace="&NAME_SPACE;"
        yang_name="/copy-image-active-to-standby"
        >
        <ACTION builtin="clish_extn"/>
    </COMMAND>

    <!-- boot -->
    <COMMAND name="boot"
        help="Tell the system where to access the software image at bootup"
        access="sysadmin"
        >
    </COMMAND>
    <!-- boot system -->
    <COMMAND name="boot system"
        help="Setup boot system partition"
        access="sysadmin"
        ptype="SUBCOMMAND"
        operation="generic-rpc"
        namespace="&NAME_SPACE;"
        yang_name="&BOOT_SYSTEM;"
        >
        <PARAM
            name="system-boot-option"
            help="System boot option"
            ptype="SUBCOMMAND"
            mode="switch"
            >
            <PARAM
                name="active"
                help="Reset the running partition as the next boot partition"
                mode="subcommand"
                ptype="SUBCOMMAND"
                yang_name="&BOOT_SYSTEM;/system-partition=${active}"
                />
            <PARAM
                name="standby"
                help="Set the standby partition as the next boot partition"
                mode="subcommand"
                ptype="SUBCOMMAND"
                yang_name="&BOOT_SYSTEM;/system-partition=${standby}"
                />
        </PARAM>
        <ACTION builtin="clish_extn"/>
    </COMMAND>


    <!-- show commands -->
    <COMMAND
        name="show version"
        help="Show the software version on the system"
        operation="get"
        yang_filter="&FILTER_NS_SOFTWARE;/system-sw-state/sw-version|&FILTER_NS_UPTIME;/system-state/system-status"
        template="show_chassis_version.xsl"
        >
        <ACTION builtin="clish_extn"> </ACTION>
    </COMMAND>

    <COMMAND
        name="show image"
        help="Show image information"
        >
    </COMMAND>

    <COMMAND name="show image status"
        help="Show the current status of image operations in progress"
        operation="get"
        yang_filter="&FILTER_NS_SOFTWARE;/system-sw-state/software-upgrade-status"
        template="image_status.xsl"
        >
        <ACTION builtin="clish_extn"> </ACTION>
    </COMMAND>

    <COMMAND
        name="show boot"
        help="Show boot information"
        operation="get"
        yang_filter="&FILTER_NS_SOFTWARE;/system-sw-state/software-partition-status"
        template="boot.xsl"
        >
        <ACTION builtin="clish_extn"> </ACTION>
    </COMMAND>

    <COMMAND
        name="show boot detail"
        help="Show boot detailed information"
        operation="get"
        yang_filter="&FILTER_NS_SOFTWARE;/system-sw-state/software-partition-status"
        template="boot_detail.xsl"
        >
        <ACTION builtin="clish_extn"> </ACTION>
    </COMMAND>

</VIEW>
<!--=======================================================-->
    <!--                Config MODE                            -->
    <!--=======================================================-->
</CLISH_MODULE>

