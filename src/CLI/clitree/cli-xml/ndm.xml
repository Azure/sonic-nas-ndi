<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE CLISH_MODULE [
<!ENTITY NAME_SPACE                 "http://www.dellemc.com/networking/os10/dell-node-management">
<!ENTITY PROVISION_CFG              "/provision/unit-provision">
<!ENTITY PROVISION_CFG_ID           "/provision/unit-provision/unit=${unit}">
<!ENTITY PROVISION_CFG_NAME         "/provision/unit-provision/provision-name=${provision-name}">
<!ENTITY NO_PROVISION_CFG_NAME      "/provision/unit-provision/provision-name">
]>

<CLISH_MODULE
    xmlns="http://www.dellemc.com/force10/XMLSchema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xsi:schemaLocation="http://www.dellemc.com/force10/XMLSchema
                        http://www.dellemc.com/force10/XMLSchema/clish.xsd"
    >

    <!--=======================================================-->
    <VIEW name="enable-view">
        <COMMAND name="reload" access="sysadmin"
          help="Reboot Dell EMC Networking Operating System"
          ptype="SUBCOMMAND"
          mode="subcommand"
          operation="generic-rpc"
          prompt_fn="system_reload_cb"
          prompt_str="Proceed to reboot the system? [confirm yes/no]:"
          namespace="&NAME_SPACE;"
          yang_name="/reload-system"
          >
          <ACTION builtin="clish_extn"/>
        </COMMAND>

    </VIEW>

    <!--=======================================================-->
    <!--                View MODE                              -->
    <!--=======================================================-->

    <VIEW name="hidden-view">

    <!-- Show Topology Map -->
      <COMMAND
        name="show topology-map"
        help="Show the topology map for all IDS"
        namespace="&NAME_SPACE;"
        operation="get"
        yang_filter="Filter_Type:SUBTREE;Filter_Namespace:&NAME_SPACE;;Filter_Conditions:/topology-oper-data/map"
        template="show_topology_map.xsl"
        >
        <PARAM
            name="topo_id"
            help="Topology ID"
            ptype="RANGE_1_255"
            optional="true"
            yang_filter="Filter_Type:SUBTREE;Filter_Namespace:&NAME_SPACE;;Filter_Conditions:/topology-oper-data/topology-id=${topo_id},/topology-oper-data/map"
            template="show_topology_map.xsl"
        />
        <ACTION builtin="clish_extn"> </ACTION>
      </COMMAND>
    </VIEW>


    <VIEW name="enable-view">
      <!-- Show unit-provision -->
      <COMMAND
        name="show unit-provision"
        help="Show unit provisioning configuration"
        namespace="&NAME_SPACE;"
        pfeature="FEATURE_UNIT_PROVISION"
        operation="get"
        yang_filter="Filter_Type:SUBTREE;Filter_Namespace:&NAME_SPACE;;Filter_Conditions:/provision/unit-provision-state"
        template="show_unit_provision.xsl"
        >
        <ACTION builtin="clish_extn"> </ACTION>
      </COMMAND>
    </VIEW>

    <!--=======================================================-->
    <!--                CONFIG MODE                            -->
    <!--=======================================================-->
    <VIEW
      name="configure-view"
      >
      <!-- unit-provision <node/unit> {provision name} -->
      <COMMAND
        name="unit-provision"
        help="Unit provision configuration"
        namespace="&NAME_SPACE;"
        operation="edit-config"
        pfeature="FEATURE_UNIT_PROVISION"
        yang_key="&PROVISION_CFG;/unit"
        >
        <PARAM
            name="unit"
            help="Provisioning unit"
            ptype="SWITCH_ID"
            yang_name="&PROVISION_CFG_ID;"/>
        <PARAM
            name="provision-name"
            help="Unit provision name"
            yang_name="&PROVISION_CFG_NAME;"
            optional="true"
            ptype="SUBCOMMAND">
        </PARAM>
        <ACTION
            builtin="clish_extn"
            />
      </COMMAND>
      <!-- no unit-provision <node/unit> -->
      <COMMAND
        name="no unit-provision"
        help="Remove unit provision"
        namespace="&NAME_SPACE;"
        operation="edit-config"
        pfeature="FEATURE_UNIT_PROVISION"
        sub_oper_yang="remove:provision-name"
        yang_name="&NO_PROVISION_CFG_NAME;"
        yang_key="&PROVISION_CFG;/unit"
        >
        <PARAM
            name="unit"
            help="Provisioning unit"
            ptype="SWITCH_ID"
            yang_name="&PROVISION_CFG_ID;"/>
        <ACTION
            builtin="clish_extn"
            />
      </COMMAND>
    </VIEW>
</CLISH_MODULE>
