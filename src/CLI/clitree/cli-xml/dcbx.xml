<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE CLISH_MODULE [
<!ENTITY MODULE-PREF-IANA-IF "ianaift">
<!ENTITY MODULE-NS-IANA-IF           "&MODULE-PREF-IANA-IF;=urn:ietf:params:xml:ns:yang:iana-if-type">
<!ENTITY MODULE                      "dell-dcbx">
<!ENTITY MODULE-NS                   "http://www.dellemc.com/networking/os10/dell-dcbx">
<!ENTITY IF-MODULE-NS                "urn:ietf:params:xml:ns:yang:ietf-interfaces">
<!ENTITY MODULE-INTF-NS              "&IF-MODULE-NS;,dell-dcbx=&MODULE-NS;">
<!ENTITY MODULE-REF                  "dell-dcbx">
<!ENTITY SUBTREE_FILTER              "Filter_Type:SUBTREE">

<!ENTITY IANA-LAG-TYPE               "ianaift:ieee8023adLag">
<!ENTITY IF_CFG                      "/interfaces/interface">
<!ENTITY IF_STATE                    "/interfaces-state/interface">
<!ENTITY DCBX_IF_STATE               "&IF_STATE;/&MODULE-REF;">
<!ENTITY DCBX_IF_STATS               "/interfaces-state/interface/statistics/&MODULE-REF;">
<!ENTITY DCBX_INTF_CFG               "/interfaces/interface/&MODULE-REF;:dcbx-config">
<!ENTITY DCBX_RANGE_INTF             "/interfaces/interface[]">
<!ENTITY DCBX_RANGE_INTF_CFG         "&DCBX_RANGE_INTF;/&MODULE-REF;:dcbx-config">
<!ENTITY DCBX_RANGE_INTF_NAME        "&DCBX_RANGE_INTF;/name=${ifacename}">
<!ENTITY DCBX_IF_ADMIN_DATA          "/interfaces-state/interface/&MODULE-REF;:dcbx-admin-data">
<!ENTITY DCBX_IF_LOC_DATA            "/interfaces-state/interface/&MODULE-REF;:dcbx-loc-data">
<!ENTITY DCBX_IF_REM_DATA            "/interfaces-state/interface/&MODULE-REF;:dcbx-remote-data">
<!ENTITY GLOBAL_STATUS               "/global-status">


]>
<CLISH_MODULE
          xmlns="http://www.dellemc.com/force10/XMLSchema"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xmlns:xi="http://www.w3.org/2001/XInclude"
          xsi:schemaLocation="http://www.dellemc.com/force10/XMLSchema
                              http://www.dellemc.com/force10/XMLSchema/clish.xsd"
    >
    <!--=======================================================-->
    <!--                Exec MODE                              -->
    <!--=======================================================-->
    <VIEW
        name="enable-view"
        >
        <COMMAND
            name="show lldp dcbx"
            help="Show DCBX information"
            ptype="SUBCOMMAND"
            mode="subcommand"
            operation="get"
            >
            <PARAM
                name="interface"
                help="DCBX information of interface"
                ptype="SUBCOMMAND"
                mode="subcommand"
                >
                <PARAM
                    name="iface"
                    help="Physical interface"
                    ptype="PHY_INTERFACE"
                    yang_filter="&SUBTREE_FILTER;;Filter_Conditions:&IF_STATE;/name=${iface},&DCBX_IF_STATE;:ets-status,&DCBX_IF_STATE;:dcbx-status,&DCBX_IF_STATE;:pfc-status;Filter_Namespace:&MODULE-INTF-NS;|&SUBTREE_FILTER;;Filter_Conditions:&IF_STATE;/name=${iface},&DCBX_IF_STATE;:cee-local-info;Filter_Namespace:&MODULE-INTF-NS;|&SUBTREE_FILTER;;Filter_Conditions:&IF_STATE;/name=${iface},&DCBX_IF_STATE;:dcbx-remote-data;Filter_Namespace:&MODULE-INTF-NS;|&SUBTREE_FILTER;;Filter_Conditions:&IF_STATE;/name=${iface},&DCBX_IF_STATE;:cee-peer-info;Filter_Namespace:&MODULE-INTF-NS;|&SUBTREE_FILTER;;Filter_Conditions:&IF_STATE;/name=${iface},&DCBX_IF_STATS;:dcbx-stats;Filter_Namespace:&MODULE-INTF-NS;|&SUBTREE_FILTER;;Filter_Conditions:&GLOBAL_STATUS;;Filter_Namespace:&MODULE-NS;"
                    template="show_lldp_dcbx_interface.xsl"
                   >
                   <PARAM
                       name="intf-subcmds"
                       help="sub-commands"
                       ptype="SUBCOMMAND"
                       mode="switch"
                       optional="true"
                       >
                       <PARAM
                           name="ets"
                           help="Show Ets"
                           ptype="SUBCOMMAND"
                           mode="subcommand"
                           >
                           <PARAM
                               name="detail"
                               help="Ets details"
                               ptype="SUBCOMMAND"
                               mode="subcommand"
                               yang_filter="&SUBTREE_FILTER;;Filter_Conditions:&IF_STATE;/name=${iface},&DCBX_IF_STATS;:dcbx-stats,&DCBX_IF_STATE;:dcbx-status,&DCBX_IF_STATE;:ets-status,&DCBX_IF_ADMIN_DATA;/&MODULE-REF;:ets-conf-prio-assign,&DCBX_IF_ADMIN_DATA;/&MODULE-REF;:ets-conf-traffic-class-bandwidth,&DCBX_IF_ADMIN_DATA;/&MODULE-REF;:ets-conf-traffic-sel-algo,&DCBX_IF_LOC_DATA;/&MODULE-REF;:ets-conf-prio-assign,&DCBX_IF_LOC_DATA;/&MODULE-REF;:ets-conf-traffic-class-bandwidth,&DCBX_IF_LOC_DATA;/&MODULE-REF;:ets-conf-traffic-sel-algo,&DCBX_IF_REM_DATA;/&MODULE-REF;:ets-conf-prio-assign,&DCBX_IF_REM_DATA;/&MODULE-REF;:ets-conf-traffic-class-bandwidth,&DCBX_IF_REM_DATA;/&MODULE-REF;:ets-conf-traffic-sel-algo,&DCBX_IF_REM_DATA;/&MODULE-REF;:ets-pfc-info,;Filter_Namespace:&MODULE-INTF-NS;|&SUBTREE_FILTER;;Filter_Conditions:&GLOBAL_STATUS;;Filter_Namespace:&MODULE-NS;"
                               template="show_lldp_dcbx_interface_ets_detail.xsl"
                               />
                       </PARAM>
                       <PARAM
                           name="pfc"
                           help="Show Pfc"
                           ptype="SUBCOMMAND"
                           mode="subcommand"
                           >
                           <PARAM
                               name="detail"
                               help="Pfc details"
                               ptype="SUBCOMMAND"
                               mode="subcommand"
                               yang_filter="&SUBTREE_FILTER;;Filter_Conditions:&IF_STATE;/name=${iface},&DCBX_IF_STATE;:dcbx-status,&DCBX_IF_STATE;:app-status,&DCBX_IF_STATE;:pfc-status,&DCBX_IF_LOC_DATA;/&MODULE-REF;:pfc-enable,&DCBX_IF_ADMIN_DATA;/&MODULE-REF;:pfc-enable,&DCBX_IF_REM_DATA;/&MODULE-REF;:pfc-enable,&DCBX_IF_REM_DATA;/&MODULE-REF;:ets-pfc-info,&DCBX_IF_REM_DATA;/&MODULE-REF;:dcbx-status,&DCBX_IF_STATS;:dcbx-stats;Filter_Namespace:&MODULE-INTF-NS;|&SUBTREE_FILTER;;Filter_Conditions:&GLOBAL_STATUS;;Filter_Namespace:&MODULE-NS;"
                               template="show_lldp_dcbx_interface_pfc_detail.xsl"
                               />
                       </PARAM>
                   </PARAM>
                </PARAM>
            </PARAM>
            <ACTION
                builtin="clish_extn"
                />
        </COMMAND>
    </VIEW>

    <!--=======================================================-->
    <!--                Config MODE                              -->
    <!--=======================================================-->
    <VIEW
        name="configure-view"
        >
        <!-- dcbx enable -->
        <COMMAND
            name="dcbx"
            help="DCBX commands"
            operation="edit-config"
            namespace="&MODULE-NS;"
            >
            <PARAM
                name="enable"
                help="Enable dcbx globally"
                ptype="SUBCOMMAND"
                mode="subcommand"
                yang_name="/global-config/enable=true"
                />
            <ACTION
                builtin="clish_extn"
                />
        </COMMAND>
        <!-- no dcbx enable -->
        <COMMAND
            name="no dcbx"
            help="DCBX commands"
            operation="edit-config"
            namespace="&MODULE-NS;"
            >
            <PARAM
                name="enable"
                help="Enable dcbx globally"
                ptype="SUBCOMMAND"
                mode="subcommand"
                yang_name="/global-config/enable=false"
                />
            <ACTION
                builtin="clish_extn"
                />
        </COMMAND>
    </VIEW>
    <!-- interface config commands -->
    <VIEW
        name="configure-if-view"
        >
        <COMMAND
            name="dcbx"
            help="DCBX commands"
            operation="edit-config"
            namespace="&MODULE-INTF-NS;"
            >
            <PARAM
                name="dcbx-subcmds"
                help="sub-commands"
                ptype="SUBCOMMAND"
                mode="switch"
                >
                <PARAM
                    name="version"
                    help="Modify dcbx version"
                    ptype="SUBCOMMAND"
                    mode="subcommand"
                    >
                    <PARAM
                        name="version-subcmds"
                        help="sub-commands"
                        ptype="SUBCOMMAND"
                        mode="switch"
                        >
                        <PARAM
                            name="auto"
                            help="Automatically select the version based on the peer response"
                            ptype="SUBCOMMAND"
                            mode="subcommand"
                            yang_name="&IF_CFG;/name=${ifacename},&DCBX_INTF_CFG;/&MODULE-REF;:version=auto"
                            />
                        <PARAM
                            name="cee"
                            help="Force the mode to CEE"
                            ptype="SUBCOMMAND"
                            mode="subcommand"
                            yang_name="&IF_CFG;/name=${ifacename},&DCBX_INTF_CFG;/&MODULE-REF;:version=cee"
                            />
                        <PARAM
                            name="ieee"
                            help="Force the mode to IEEE 802.1Qaz"
                            ptype="SUBCOMMAND"
                            mode="subcommand"
                            yang_name="&IF_CFG;/name=${ifacename},&DCBX_INTF_CFG;/&MODULE-REF;:version=ieee-v2-5"
                            />
                        </PARAM>
                    </PARAM>
                    <MACRO name="MACRO_DCBXP_TLV_SELECT"/>
                </PARAM>
            <ACTION
                builtin="clish_extn"
                />
        </COMMAND>
        <COMMAND
            name="no dcbx"
            help="DCBX commands"
            operation="edit-config"
            namespace="&MODULE-INTF-NS;"
            add_config_entry="true"
            >
            <PARAM
                name="dcbx-subcmds"
                help="sub-commands"
                ptype="SUBCOMMAND"
                mode="switch"
                >
                <PARAM
                    name="version"
                    help="Modify dcbx version"
                    ptype="SUBCOMMAND"
                    mode="subcommand"
                    db_flag="SKIP_TREE"
                    yang_name="&IF_CFG;/name=${ifacename},&DCBX_INTF_CFG;/&MODULE-REF;:version"
                    sub_oper_yang="remove:version"
                    />
                    <MACRO name="MACRO_NO_DCBXP_TLV_SELECT"/>
                </PARAM>
            <ACTION
                builtin="clish_extn"
                />
        </COMMAND>
    </VIEW>

    <!--=======================================================-->
    <!--              Config Interface range MODE              -->
    <!--=======================================================-->

    <VIEW
        name="configure-if-range-view"
        >
        <COMMAND
            name="dcbx"
            help="DCBX commands"
            operation="edit-config"
            namespace="&MODULE-INTF-NS;"
            >
            <PARAM
                name="dcbx-subcmds"
                help="sub-commands"
                ptype="SUBCOMMAND"
                mode="switch"
                >
                <PARAM
                    name="version"
                    help="Modify dcbx version"
                    ptype="SUBCOMMAND"
                    mode="subcommand"
                    >
                    <PARAM
                        name="version-subcmds"
                        help="sub-commands"
                        ptype="SUBCOMMAND"
                        mode="switch"
                        >
                        <PARAM
                            name="auto"
                            help="Automatically select the version based on the peer response"
                            ptype="SUBCOMMAND"
                            mode="subcommand"
                            yang_name="&DCBX_RANGE_INTF_NAME;,&DCBX_RANGE_INTF_CFG;/&MODULE-REF;:version=auto"
                            />
                        <PARAM
                            name="cee"
                            help="Force the mode to CEE"
                            ptype="SUBCOMMAND"
                            mode="subcommand"
                            yang_name="&DCBX_RANGE_INTF_NAME;,&DCBX_RANGE_INTF_CFG;/&MODULE-REF;:version=cee"
                            />
                        <PARAM
                            name="ieee"
                            help="Force the mode to IEEE 802.1Qaz"
                            ptype="SUBCOMMAND"
                            mode="subcommand"
                            yang_name="&DCBX_RANGE_INTF_NAME;,&DCBX_RANGE_INTF_CFG;/&MODULE-REF;:version=ieee-v2\\-5"
                            />
                        </PARAM>
                    </PARAM>
                    <MACRO name="MACRO_RANGE_DCBXP_TLV_SELECT"/>
                </PARAM>
            <ACTION
                builtin="clish_extn"
                />
        </COMMAND>
        <COMMAND
            name="no dcbx"
            help="DCBX commands"
            operation="edit-config"
            namespace="&MODULE-INTF-NS;"
            >
            <PARAM
                name="dcbx-subcmds"
                help="sub-commands"
                ptype="SUBCOMMAND"
                mode="switch"
                >
                <PARAM
                    name="version"
                    help="Modify dcbx version"
                    ptype="SUBCOMMAND"
                    mode="subcommand"
                    yang_name="&DCBX_RANGE_INTF_NAME;,&DCBX_RANGE_INTF_CFG;/&MODULE-REF;:version"
                    sub_oper_yang="remove:version"
                    />
                    <MACRO name="MACRO_RANGE_NO_DCBXP_TLV_SELECT"/>
                </PARAM>
            <ACTION
                builtin="clish_extn"
                />
        </COMMAND>
    </VIEW>

</CLISH_MODULE>
