<?xml version='1.0' encoding='UTF-8'?>
<!--
Copyright 2019 Dell, Inc.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<CLISH_MODULE
    xmlns="http://www.dellemc.com/sonic/XMLSchema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xsi:schemaLocation="http://www.dellemc.com/sonic/XMLSchema
                        http://www.dellemc.com/sonic/XMLSchema/clish.xsd"
    >
<!--=========================================================================-->
  <VIEW name="configure-view">
    <!-- tam device-id -->
    <COMMAND name="tam" help="TAM Device Configuration"/>
    <COMMAND name="tam device-id" help="Configure device-id" ptype="SUBCOMMAND" mode="subcommand">
      <PARAM name="device-id" help="Device ID" ptype="UINT16"> </PARAM>
      <ACTION>python $SONIC_CLI_ROOT/sonic-cli-ifa.py patch_sonic_ifa_sonic_ifa_tam_device_table_tam_device_table_list_deviceid device ${device-id}</ACTION>
    </COMMAND>

    <!-- tam collector -->
    <COMMAND name="tam collector" help="Configure TAM collector" ptype="SUBCOMMAND" mode="subcommand">
      <PARAM name="name" help="Collector Name" ptype="STRING"> </PARAM>
      <PARAM name="ip-type" help="Collector IP Address Type" ptype="IP_TYPE"> </PARAM>
      <PARAM name="ip-addr" help="Collector IP Address" ptype="IPV4V6_ADDR"> </PARAM>
      <PARAM name="port" help="Collector Port" ptype="UINT"> </PARAM>
      <ACTION>python $SONIC_CLI_ROOT/sonic-cli-ifa.py patch_sonic_ifa_sonic_ifa_tam_collector_table_tam_collector_table_list ${name} ${ip-type} ${ip-addr} ${port}</ACTION>
    </COMMAND>

    <!-- no tam device -->
    <COMMAND name="no tam" help="Unconfigure TAM device properties"/>
    <COMMAND name="no tam device-id" help="Clear TAM device ID" ptype="SUBCOMMAND" mode="subcommand">
      <ACTION> python $SONIC_CLI_ROOT/sonic-cli-ifa.py delete_sonic_ifa_sonic_ifa_tam_device_table_tam_device_table_list_deviceid device</ACTION>
    </COMMAND>

    <!-- no tam collector -->
    <COMMAND name="no tam collector" help="Clear TAM Collector information" ptype="SUBCOMMAND" mode="subcommand">
      <PARAM name="name" help="Collector Name" ptype="STRING"> </PARAM>
      <ACTION> python $SONIC_CLI_ROOT/sonic-cli-ifa.py delete_sonic_ifa_sonic_ifa_tam_collector_table_tam_collector_table_list ${name}</ACTION>
    </COMMAND>

    <!-- tam-int-ifa enable/disable -->
    <COMMAND name="tam-int-ifa" help="TAM IFA Configuration"/>
    <COMMAND name="tam-int-ifa feature" help="Enable/disable TAM IFA" ptype="SUBCOMMAND" mode="subcommand">
      <PARAM name="enable" help="Device ID" ptype="ENA_DISA"> </PARAM>
      <ACTION> if test "${enable}" = "enable" ; then&#xA;
python $SONIC_CLI_ROOT/sonic-cli-ifa.py patch_sonic_ifa_sonic_ifa_tam_int_ifa_feature_table_tam_int_ifa_feature_table_list feature true&#xA;
else&#xA;
python $SONIC_CLI_ROOT/sonic-cli-ifa.py patch_sonic_ifa_sonic_ifa_tam_int_ifa_feature_table_tam_int_ifa_feature_table_list feature false&#xA;
fi&#xA;
      </ACTION>
    </COMMAND>

    <!-- tam-int-ifa flow-->
    <COMMAND name="tam-int-ifa flow" help="Configure TAM IFA flow" ptype="SUBCOMMAND" mode="subcommand">
      <PARAM name="flow-name" help="Flow name" ptype="STRING"> </PARAM>
      <PARAM name="acl-rule-name" help="ACL Rule name" ptype="STRING"> </PARAM>
      <PARAM name="acl-table-name" help="ACL table name" ptype="STRING"> </PARAM>
      <PARAM name="type-switch" help="Select an option" ptype="SUBCOMMAND" mode="switch" >
        <PARAM name="sampling-rate" help="Sampling rate" ptype="UINT"> </PARAM>
        <PARAM name="collector" help="Collector name" ptype="STRING"> </PARAM>
      </PARAM>
      <ACTION> python $SONIC_CLI_ROOT/sonic-cli-ifa.py patch_sonic_ifa_sonic_ifa_tam_int_ifa_flow_table_tam_int_ifa_flow_table_list ${flow-name} ${acl-rule-name} ${acl-table-name} ${sampling-rate} ${collector} </ACTION>
    </COMMAND>

    <!-- no tam-int-ifa flow -->
    <COMMAND name="no tam-int-ifa" help="Unconfigure TAM IFA Flow properties"/>
    <COMMAND name="no tam-int-ifa flow" help="Clear TAM IFA flow information" ptype="SUBCOMMAND" mode="subcommand">
      <PARAM name="name" help="Flow Name" ptype="STRING"> </PARAM>
      <ACTION> python $SONIC_CLI_ROOT/sonic-cli-ifa.py delete_sonic_ifa_sonic_ifa_tam_int_ifa_flow_table_tam_int_ifa_flow_table_list ${name}</ACTION>
    </COMMAND>

  </VIEW>

</CLISH_MODULE>

