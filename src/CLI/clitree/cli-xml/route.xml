<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE CLISH_MODULE [
<!ENTITY SUBTREE_FILTER                 "Filter_Type:SUBTREE">
<!ENTITY MODULE_NS                      "http://www.dellemc.com/networking/os10/dell-routing">
<!ENTITY ROUTING_INSTANCE               "/routing/instance">
<!ENTITY ROUTING_INSTANCE_NAME          "/routing/instance/vrf-name">
<!ENTITY STATIC_ROUTES                  "&ROUTING_INSTANCE;/static-routes">
<!ENTITY IPV4_ROUTE                     "&STATIC_ROUTES;/ipv4/route">
<!ENTITY IPV4_NEXT_HOP                  "&IPV4_ROUTE;/next-hop">
<!ENTITY IPV4_NEXT_HOP_ADDR             "&IPV4_NEXT_HOP;/address">
<!ENTITY IPV4_NEXT_HOP_METRIC           "&IPV4_NEXT_HOP;/metric">
<!ENTITY IPV4_NEXT_HOP_INTF             "&IPV4_NEXT_HOP;/nhop-intf">
<!ENTITY IPV6_ROUTE                     "&STATIC_ROUTES;/ipv6/route">
<!ENTITY IPV6_NEXT_HOP                  "&IPV6_ROUTE;/next-hop">
<!ENTITY IPV6_NEXT_HOP_ADDR             "&IPV6_NEXT_HOP;/address">
<!ENTITY IPV6_NEXT_HOP_METRIC           "&IPV6_NEXT_HOP;/metric">
<!ENTITY IPV6_NEXT_HOP_INTF             "&IPV6_NEXT_HOP;/nhop-intf">
]>

<CLISH_MODULE
    xmlns="http://www.dellemc.com/force10/XMLSchema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xsi:schemaLocation="http://www.dellemc.com/force10/XMLSchema
						http://www.dellemc.com/force10/XMLSchema/clish.xsd"
    >
    <!--=======================================================-->
    <!--MODE : Global -->
    <VIEW
        name="configure-view"
        >
        <!--ip route  -->
        <COMMAND
            name="ip route"
            help="Establish static routes for ipv4"
            operation="edit-config"
            yang_key="&ROUTING_INSTANCE_NAME;"
            namespace="&MODULE_NS;"
            >
            <!--ip route ip-prefix -->
            <PARAM
                name="prefix"
                help="Destination prefix"
                ptype="IP_ADDR_MASK"
                prompt_fn="inconsistent_mask_check"
                prompt_str="${prefix}"
                yang_key="&IPV4_ROUTE;/destination-prefix"
                yang_name="&ROUTING_INSTANCE_NAME;=default,&IPV4_ROUTE;/destination-prefix=${prefix}"
                >
                <!--- ip route ip-prefix { interface | next-hop} -->
                <PARAM
                    name="route-target"
                    help="Route target"
                    ptype="SUBCOMMAND"
                    mode="switch"
                    >
                    <!--- ip route ip-prefix interface intf-type intf_num [next-hop] [preference] -->
                    <MACRO name="IF_MANDATORY_RT_PREF" arg="&IPV4_NEXT_HOP_INTF;,&IPV4_NEXT_HOP_METRIC;,&IPV4_NEXT_HOP_ADDR;"/>
                    <!--- ip route ip-prefix next-hop [preference]  -->
                    <PARAM
                        name="next-hop-addr"
                        help="Set next-hop address"
                        ptype="IP_ADDR"
                        yang_key="&IPV4_NEXT_HOP_ADDR;=!0.0.0.0,&IPV4_NEXT_HOP_INTF;=''"
                        yang_name="&IPV4_NEXT_HOP_ADDR;=${next-hop-addr}"
                        >

                        <MACRO name="ALL_IF_OPTIONAL_WITH_ORDER_TRUE" arg="&IPV4_NEXT_HOP_INTF;" />

                        <PARAM
                            name="pref"
                            help="Route preference"
                            ptype="RANGE_1_255"
                            optional="true"
                            yang_name="&IPV4_NEXT_HOP;/metric=${pref}"
                            />
                    </PARAM>
                </PARAM>
            </PARAM>
            <!---prefix end -->
            <ACTION
                builtin="clish_extn"
                > </ACTION>
        </COMMAND>
        <!--ipv6 route  -->
        <COMMAND
            name="ipv6"
            help="Configure ipv6"
            operation="edit-config"
            namespace="&MODULE_NS;"
            yang_key="&ROUTING_INSTANCE_NAME;"
            >
            <PARAM
                name="route"
                help="Establish static routes for ipv6"
                ptype="SUBCOMMAND"
                mode="subcommand"
                >
                <!--ipv6 route ip6-prefix -->
                <PARAM
                    name="prefix"
                    help="Destination prefix"
                    ptype="IPV6_ADDR_MASK"
                    yang_key="&IPV6_ROUTE;/destination-prefix"
                    yang_name="&ROUTING_INSTANCE_NAME;=default,&IPV6_ROUTE;/destination-prefix"
                    >
                    <!--- ipv6 route ip6-prefix { interface | next-hop} -->
                    <!--- ipv6 route ip6-prefix { interface | next-hop [interface] } [preference]  -->
                    <PARAM
                        name="route-target"
                        help="Route target"
                        ptype="SUBCOMMAND"
                        mode="switch"
                        >
                        <!--- ipv6 route ip6-prefix interface intf-type intf_num  -->
                        <!--- ipv6 route ip6-prefix  interface  [preference]  -->
                        <MACRO name="IF_MANDATORY_RT_PREF_IPV6" arg="&IPV6_NEXT_HOP_INTF;,&IPV6_NEXT_HOP_METRIC;,&IPV6_NEXT_HOP_ADDR;"/>
                        <!--- ipv6 route ip6-prefix next-hop [interface] -->
                        <!-- "&IPV6_NEXT_HOP_INTF;=NA," will be added through prompt_fn -->
                        <PARAM
                            name="next-hop-addr"
                            help="Set next-hop address"
                            ptype="IPV6_ADDR"
                            prompt_oper="${next-hop-addr}"
                            prompt_str="${prefix}"
                            prompt_fn="ipv6_config_trim_leading_zeroes"
                            yang_key="&IPV6_NEXT_HOP_ADDR;=!::,&IPV6_NEXT_HOP_INTF;=''"
                            yang_name="&IPV6_NEXT_HOP_ADDR;"
                            >
                            <MACRO name="ALL_IF_OPTIONAL_WITH_ORDER_TRUE" arg="&IPV6_NEXT_HOP_INTF;" />
                            <!--- ipv6 route ip6-prefix next-hop [interface]  [preference]  -->
                            <PARAM
                                name="pref"
                                help="Route preference"
                                ptype="RANGE_1_255"
                                optional="true"
                                order="true"
                                yang_name="&IPV6_NEXT_HOP_METRIC;=${pref}"
                                />
                        </PARAM>
                    </PARAM>
                </PARAM>
                <!-- prefix end-->
            </PARAM>
            <ACTION
                builtin="clish_extn"
                > </ACTION>
        </COMMAND>
        <!-- NO COMMAND   -->
        <!--ip route  -->
        <COMMAND
            name="no ip route"
            help="Establish static routes for ipv4"
            operation="edit-config"
            namespace="&MODULE_NS;"
            >
            <PARAM
                name="prefix"
                help="Destination prefix"
                ptype="IP_ADDR_MASK"
                yang_name="&ROUTING_INSTANCE_NAME;=default,&IPV4_ROUTE;/destination-prefix=${prefix}"
                >
                <!--- no ip route ip-prefix { interface | next-hop} -->
                <PARAM
                    name="route-target"
                    help="Route target"
                    ptype="SUBCOMMAND"
                    mode="switch"
                    >
                    <!--- no ip route ip-prefix interface intf-type intf_num [next-hop] [preference] -->
                    <MACRO name="NO_IF_MANDATORY_RT_PREF" arg="&IPV4_NEXT_HOP_INTF;,next-hop,&IPV4_NEXT_HOP_ADDR;" />
                    <!--- no ip route ip-prefix next-hop [preference] -->
                    <PARAM
                        name="next-hop-addr"
                        help="Set next-hop address"
                        ptype="IP_ADDR"
                        sub_oper_yang="remove:next-hop"
                        yang_name="&IPV4_NEXT_HOP_ADDR;=${next-hop-addr}"
                        >
                        <PARAM
                            name="pref"
                            help="Route preference"
                            ptype="RANGE_1_255"
                            optional="true"
                            >
                        </PARAM>
                    </PARAM>
                </PARAM>
            </PARAM>
            <!---prefix end -->
            <ACTION
                builtin="clish_extn"
                > </ACTION>
        </COMMAND>
        <!--ipv6 route  -->
        <COMMAND
            name="no ipv6"
            help="Configure ipv6"
            operation="edit-config"
            namespace="&MODULE_NS;"
            >
            <PARAM
                name="route"
                help="Establish static routes for ipv6"
                ptype="SUBCOMMAND"
                mode="subcommand"
                >
                <PARAM
                    name="prefix"
                    help="Destination prefix"
                    ptype="IPV6_ADDR_MASK"
                    yang_name="&ROUTING_INSTANCE_NAME;=default,&IPV6_ROUTE;/destination-prefix"
                    >
                    <!---no ipv6 route ip6-prefix { interface | next-hop} -->
                    <!--- no ipv6 route ip6-prefix { interface | next-hop [interface] } [preference]  -->
                    <PARAM
                        name="route-target"
                        help="Route target"
                        ptype="SUBCOMMAND"
                        mode="switch"
                        >
                        <!---no ipv6 route ip6-prefix interface intf-type intf_num  -->
                        <!--- no ipv6 route ip6-prefix  interface [preference]  -->
                        <MACRO name="NO_IF_MANDATORY_RT_PREF_IPV6" arg="&IPV6_NEXT_HOP_INTF;,next-hop,&IPV6_NEXT_HOP_ADDR;" />
                        <!--- no ipv6 route ip6-prefix next-hop [interface] -->
                        <!-- "&IPV6_NEXT_HOP_INTF;=NA," will be added through prompt_fn -->
                        <PARAM
                            name="next-hop-addr"
                            help="Set next-hop address"
                            ptype="IPV6_ADDR"
                            prompt_oper="${next-hop-addr}"
                            prompt_str="${prefix}"
                            prompt_fn="ipv6_config_trim_leading_zeroes"
                            sub_oper_yang="remove:next-hop"
                            yang_name="&IPV6_NEXT_HOP_ADDR;"
                            >
                            <MACRO name="ALL_NO_IF_OPTIONAL_WITH_ORDER_TRUE" arg="&IPV6_NEXT_HOP_INTF;,next-hop" />
                            <!--- no ipv6 route ip6-prefix  next-hop [interface] [preference]  -->
                            <PARAM
                                name="pref"
                                help="Route preference"
                                ptype="RANGE_1_255"
                                optional="true"
                                order="true"
                                sub_oper_yang="remove:next-hop"
                                />
                        </PARAM>
                    </PARAM>
                </PARAM>
                <!-- prefix end-->
            </PARAM>
            <!--- route end-->
            <ACTION
                builtin="clish_extn"
                > </ACTION>
        </COMMAND>
    </VIEW>
</CLISH_MODULE>

